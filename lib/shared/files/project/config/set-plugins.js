#!/usr/bin/env node
"use strict";
module.exports = function () {
    return "const Dotenv = require('dotenv-webpack');\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\nconst MiniCssExtractPlugin = require('mini-css-extract-plugin');\nconst ScriptExtHtmlWebpackPlugin = require('script-ext-html-webpack-plugin');\nconst TextReplaceHtmlWebpackPlugin = require('text-replace-html-webpack-plugin');\n\nconst dot = new Dotenv({\n  path: './.env',\n});\n\nconst minify = {\n  collapseWhitespace: true,\n  removeComments: true,\n  removeRedundantAttributes: true,\n};\n\nmodule.exports = () => {\n  const html = new HtmlWebpackPlugin({\n    filename: './index.html',\n    template: './src/index.html',\n    chunks: ['main', 'vendors'],\n    async: 'vendors',\n    //favicon: './favicon.ico',\n    minify,\n  });\n\n  const analytics = dot.definitions['process.env.ANALYTICS'].replace(/[\\\\\"]/g, '');\n  const scripts = new ScriptExtHtmlWebpackPlugin({\n    sync: '[name]',\n    defaultAttribute: 'async',\n    preload: 'vendors',\n  });\n\n  return [\n    dot,\n    new MiniCssExtractPlugin({\n      filename: 'assets/css/[name].[hash:6].css',\n    }),\n    html,\n    new TextReplaceHtmlWebpackPlugin({\n      replacementArray: [\n        {\n          searchString: '@@ANALYTICS',\n          replace: analytics,\n        },\n      ],\n    }),\n    scripts,\n  ];\n};\n";
};
